{"version":3,"file":"Naja.min.js","sources":["../node_modules/event-target-shim/index.mjs","../node_modules/abortcontroller-polyfill/dist/polyfill-patch-fetch.js","../src/polyfills.js","../src/utils.ts","../src/core/UIHandler.ts","../src/core/FormsHandler.ts","../src/core/RedirectHandler.ts","../src/core/SnippetHandler.ts","../src/core/HistoryHandler.ts","../src/core/SnippetCache.ts","../src/core/ScriptLoader.ts","../src/Naja.ts","../src/index.ts","../src/extensions/AbortExtension.ts","../src/extensions/UniqueExtension.ts"],"sourcesContent":["/**\n * Assert a condition.\n * @param condition The condition that it should satisfy.\n * @param message The error message.\n * @param args The arguments for replacing placeholders in the message.\n */\nfunction assertType(condition, message, ...args) {\n    if (!condition) {\n        throw new TypeError(format(message, args));\n    }\n}\n/**\n * Convert a text and arguments to one string.\n * @param message The formating text\n * @param args The arguments.\n */\nfunction format(message, args) {\n    let i = 0;\n    return message.replace(/%[os]/gu, () => anyToString(args[i++]));\n}\n/**\n * Convert a value to a string representation.\n * @param x The value to get the string representation.\n */\nfunction anyToString(x) {\n    if (typeof x !== \"object\" || x === null) {\n        return String(x);\n    }\n    return Object.prototype.toString.call(x);\n}\n\nlet currentErrorHandler;\n/**\n * Set the error handler.\n * @param value The error handler to set.\n */\nfunction setErrorHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The error handler must be a function or undefined, but got %o.\", value);\n    currentErrorHandler = value;\n}\n/**\n * Print a error message.\n * @param maybeError The error object.\n */\nfunction reportError(maybeError) {\n    try {\n        const error = maybeError instanceof Error\n            ? maybeError\n            : new Error(anyToString(maybeError));\n        // Call the user-defined error handler if exists.\n        if (currentErrorHandler) {\n            currentErrorHandler(error);\n            return;\n        }\n        // Dispatch an `error` event if this is on a browser.\n        if (typeof dispatchEvent === \"function\" &&\n            typeof ErrorEvent === \"function\") {\n            dispatchEvent(new ErrorEvent(\"error\", { error, message: error.message }));\n        }\n        // Emit an `uncaughtException` event if this is on Node.js.\n        //istanbul ignore else\n        else if (typeof process !== \"undefined\" &&\n            typeof process.emit === \"function\") {\n            process.emit(\"uncaughtException\", error);\n            return;\n        }\n        // Otherwise, print the error.\n        console.error(error);\n    }\n    catch (_a) {\n        // ignore.\n    }\n}\n\n/**\n * The global object.\n */\n//istanbul ignore next\nconst Global = typeof window !== \"undefined\"\n    ? window\n    : typeof self !== \"undefined\"\n        ? self\n        : typeof global !== \"undefined\"\n            ? global\n            : typeof globalThis !== \"undefined\"\n                ? globalThis\n                : undefined;\n\nlet currentWarnHandler;\n/**\n * Set the warning handler.\n * @param value The warning handler to set.\n */\nfunction setWarningHandler(value) {\n    assertType(typeof value === \"function\" || value === undefined, \"The warning handler must be a function or undefined, but got %o.\", value);\n    currentWarnHandler = value;\n}\n/**\n * The warning information.\n */\nclass Warning {\n    constructor(code, message) {\n        this.code = code;\n        this.message = message;\n    }\n    /**\n     * Report this warning.\n     * @param args The arguments of the warning.\n     */\n    warn(...args) {\n        var _a;\n        try {\n            // Call the user-defined warning handler if exists.\n            if (currentWarnHandler) {\n                currentWarnHandler({ ...this, args });\n                return;\n            }\n            // Otherwise, print the warning.\n            const stack = ((_a = new Error().stack) !== null && _a !== void 0 ? _a : \"\").replace(/^(?:.+?\\n){2}/gu, \"\\n\");\n            console.warn(this.message, ...args, stack);\n        }\n        catch (_b) {\n            // Ignore.\n        }\n    }\n}\n\nconst InitEventWasCalledWhileDispatching = new Warning(\"W01\", \"Unable to initialize event under dispatching.\");\nconst FalsyWasAssignedToCancelBubble = new Warning(\"W02\", \"Assigning any falsy value to 'cancelBubble' property has no effect.\");\nconst TruthyWasAssignedToReturnValue = new Warning(\"W03\", \"Assigning any truthy value to 'returnValue' property has no effect.\");\nconst NonCancelableEventWasCanceled = new Warning(\"W04\", \"Unable to preventDefault on non-cancelable events.\");\nconst CanceledInPassiveListener = new Warning(\"W05\", \"Unable to preventDefault inside passive event listener invocation.\");\nconst EventListenerWasDuplicated = new Warning(\"W06\", \"An event listener wasn't added because it has been added already: %o, %o\");\nconst OptionWasIgnored = new Warning(\"W07\", \"The %o option value was abandoned because the event listener wasn't added as duplicated.\");\nconst InvalidEventListener = new Warning(\"W08\", \"The 'callback' argument must be a function or an object that has 'handleEvent' method: %o\");\nconst InvalidAttributeHandler = new Warning(\"W09\", \"Event attribute handler must be a function: %o\");\n\n/*eslint-disable class-methods-use-this */\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * `EventTarget` shim can control the internal state of this `Event` objects.\n * @see https://dom.spec.whatwg.org/#event\n */\nclass Event {\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    static get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    static get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    static get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    static get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * Initialize this event instance.\n     * @param type The type of this event.\n     * @param eventInitDict Options to initialize.\n     * @see https://dom.spec.whatwg.org/#dom-event-event\n     */\n    constructor(type, eventInitDict) {\n        Object.defineProperty(this, \"isTrusted\", {\n            value: false,\n            enumerable: true,\n        });\n        const opts = eventInitDict !== null && eventInitDict !== void 0 ? eventInitDict : {};\n        internalDataMap.set(this, {\n            type: String(type),\n            bubbles: Boolean(opts.bubbles),\n            cancelable: Boolean(opts.cancelable),\n            composed: Boolean(opts.composed),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n            inPassiveListenerFlag: false,\n            dispatchFlag: false,\n            timeStamp: Date.now(),\n        });\n    }\n    /**\n     * The type of this event.\n     * @see https://dom.spec.whatwg.org/#dom-event-type\n     */\n    get type() {\n        return $(this).type;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-target\n     */\n    get target() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @deprecated Use the `target` property instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-srcelement\n     */\n    get srcElement() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-currenttarget\n     */\n    get currentTarget() {\n        return $(this).currentTarget;\n    }\n    /**\n     * The event target of the current dispatching.\n     * This doesn't support node tree.\n     * @see https://dom.spec.whatwg.org/#dom-event-composedpath\n     */\n    composedPath() {\n        const currentTarget = $(this).currentTarget;\n        if (currentTarget) {\n            return [currentTarget];\n        }\n        return [];\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * The current event phase.\n     * @see https://dom.spec.whatwg.org/#dom-event-eventphase\n     */\n    get eventPhase() {\n        return $(this).dispatchFlag ? 2 : 0;\n    }\n    /**\n     * Stop event bubbling.\n     * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.\n     * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation\n     */\n    stopPropagation() {\n        $(this).stopPropagationFlag = true;\n    }\n    /**\n     * `true` if event bubbling was stopped.\n     * @deprecated\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    get cancelBubble() {\n        return $(this).stopPropagationFlag;\n    }\n    /**\n     * Stop event bubbling if `true` is set.\n     * @deprecated Use the `stopPropagation()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    set cancelBubble(value) {\n        if (value) {\n            $(this).stopPropagationFlag = true;\n        }\n        else {\n            FalsyWasAssignedToCancelBubble.warn();\n        }\n    }\n    /**\n     * Stop event bubbling and subsequent event listener callings.\n     * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation\n     */\n    stopImmediatePropagation() {\n        const data = $(this);\n        data.stopPropagationFlag = data.stopImmediatePropagationFlag = true;\n    }\n    /**\n     * `true` if this event will bubble.\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbles\n     */\n    get bubbles() {\n        return $(this).bubbles;\n    }\n    /**\n     * `true` if this event can be canceled by the `preventDefault()` method.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelable\n     */\n    get cancelable() {\n        return $(this).cancelable;\n    }\n    /**\n     * `true` if the default behavior will act.\n     * @deprecated Use the `defaultPrevented` proeprty instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    get returnValue() {\n        return !$(this).canceledFlag;\n    }\n    /**\n     * Cancel the default behavior if `false` is set.\n     * @deprecated Use the `preventDefault()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag($(this));\n        }\n        else {\n            TruthyWasAssignedToReturnValue.warn();\n        }\n    }\n    /**\n     * Cancel the default behavior.\n     * @see https://dom.spec.whatwg.org/#dom-event-preventdefault\n     */\n    preventDefault() {\n        setCancelFlag($(this));\n    }\n    /**\n     * `true` if the default behavior was canceled.\n     * @see https://dom.spec.whatwg.org/#dom-event-defaultprevented\n     */\n    get defaultPrevented() {\n        return $(this).canceledFlag;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     */\n    get composed() {\n        return $(this).composed;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-istrusted\n     */\n    //istanbul ignore next\n    get isTrusted() {\n        return false;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-timestamp\n     */\n    get timeStamp() {\n        return $(this).timeStamp;\n    }\n    /**\n     * @deprecated Don't use this method. The constructor did initialization.\n     */\n    initEvent(type, bubbles = false, cancelable = false) {\n        const data = $(this);\n        if (data.dispatchFlag) {\n            InitEventWasCalledWhileDispatching.warn();\n            return;\n        }\n        internalDataMap.set(this, {\n            ...data,\n            type: String(type),\n            bubbles: Boolean(bubbles),\n            cancelable: Boolean(cancelable),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n        });\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $(event, name = \"this\") {\n    const retv = internalDataMap.get(event);\n    assertType(retv != null, \"'%s' must be an object that Event constructor created, but got another one: %o\", name, event);\n    return retv;\n}\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data private data.\n */\nfunction setCancelFlag(data) {\n    if (data.inPassiveListenerFlag) {\n        CanceledInPassiveListener.warn();\n        return;\n    }\n    if (!data.cancelable) {\n        NonCancelableEventWasCanceled.warn();\n        return;\n    }\n    data.canceledFlag = true;\n}\n// Set enumerable\nObject.defineProperty(Event, \"NONE\", { enumerable: true });\nObject.defineProperty(Event, \"CAPTURING_PHASE\", { enumerable: true });\nObject.defineProperty(Event, \"AT_TARGET\", { enumerable: true });\nObject.defineProperty(Event, \"BUBBLING_PHASE\", { enumerable: true });\nconst keys = Object.getOwnPropertyNames(Event.prototype);\nfor (let i = 0; i < keys.length; ++i) {\n    if (keys[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(Event.prototype, keys[i], { enumerable: true });\n}\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, Global.Event.prototype);\n}\n\n/**\n * Create a new InvalidStateError instance.\n * @param message The error message.\n */\nfunction createInvalidStateError(message) {\n    if (Global.DOMException) {\n        return new Global.DOMException(message, \"InvalidStateError\");\n    }\n    if (DOMException == null) {\n        DOMException = class DOMException extends Error {\n            constructor(msg) {\n                super(msg);\n                if (Error.captureStackTrace) {\n                    Error.captureStackTrace(this, DOMException);\n                }\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get code() {\n                return 11;\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get name() {\n                return \"InvalidStateError\";\n            }\n        };\n        Object.defineProperties(DOMException.prototype, {\n            code: { enumerable: true },\n            name: { enumerable: true },\n        });\n        defineErrorCodeProperties(DOMException);\n        defineErrorCodeProperties(DOMException.prototype);\n    }\n    return new DOMException(message);\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nlet DOMException;\nconst ErrorCodeMap = {\n    INDEX_SIZE_ERR: 1,\n    DOMSTRING_SIZE_ERR: 2,\n    HIERARCHY_REQUEST_ERR: 3,\n    WRONG_DOCUMENT_ERR: 4,\n    INVALID_CHARACTER_ERR: 5,\n    NO_DATA_ALLOWED_ERR: 6,\n    NO_MODIFICATION_ALLOWED_ERR: 7,\n    NOT_FOUND_ERR: 8,\n    NOT_SUPPORTED_ERR: 9,\n    INUSE_ATTRIBUTE_ERR: 10,\n    INVALID_STATE_ERR: 11,\n    SYNTAX_ERR: 12,\n    INVALID_MODIFICATION_ERR: 13,\n    NAMESPACE_ERR: 14,\n    INVALID_ACCESS_ERR: 15,\n    VALIDATION_ERR: 16,\n    TYPE_MISMATCH_ERR: 17,\n    SECURITY_ERR: 18,\n    NETWORK_ERR: 19,\n    ABORT_ERR: 20,\n    URL_MISMATCH_ERR: 21,\n    QUOTA_EXCEEDED_ERR: 22,\n    TIMEOUT_ERR: 23,\n    INVALID_NODE_TYPE_ERR: 24,\n    DATA_CLONE_ERR: 25,\n};\nfunction defineErrorCodeProperties(obj) {\n    const keys = Object.keys(ErrorCodeMap);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        const value = ErrorCodeMap[key];\n        Object.defineProperty(obj, key, {\n            get() {\n                return value;\n            },\n            configurable: true,\n            enumerable: true,\n        });\n    }\n}\n\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * This class controls the internal state of `Event`.\n * @see https://dom.spec.whatwg.org/#interface-event\n */\nclass EventWrapper extends Event {\n    /**\n     * Wrap a given event object to control states.\n     * @param event The event-like object to wrap.\n     */\n    static wrap(event) {\n        return new (getWrapperClassOf(event))(event);\n    }\n    constructor(event) {\n        super(event.type, {\n            bubbles: event.bubbles,\n            cancelable: event.cancelable,\n            composed: event.composed,\n        });\n        if (event.cancelBubble) {\n            super.stopPropagation();\n        }\n        if (event.defaultPrevented) {\n            super.preventDefault();\n        }\n        internalDataMap$1.set(this, { original: event });\n        // Define accessors\n        const keys = Object.keys(event);\n        for (let i = 0; i < keys.length; ++i) {\n            const key = keys[i];\n            if (!(key in this)) {\n                Object.defineProperty(this, key, defineRedirectDescriptor(event, key));\n            }\n        }\n    }\n    stopPropagation() {\n        super.stopPropagation();\n        const { original } = $$1(this);\n        if (\"stopPropagation\" in original) {\n            original.stopPropagation();\n        }\n    }\n    get cancelBubble() {\n        return super.cancelBubble;\n    }\n    set cancelBubble(value) {\n        super.cancelBubble = value;\n        const { original } = $$1(this);\n        if (\"cancelBubble\" in original) {\n            original.cancelBubble = value;\n        }\n    }\n    stopImmediatePropagation() {\n        super.stopImmediatePropagation();\n        const { original } = $$1(this);\n        if (\"stopImmediatePropagation\" in original) {\n            original.stopImmediatePropagation();\n        }\n    }\n    get returnValue() {\n        return super.returnValue;\n    }\n    set returnValue(value) {\n        super.returnValue = value;\n        const { original } = $$1(this);\n        if (\"returnValue\" in original) {\n            original.returnValue = value;\n        }\n    }\n    preventDefault() {\n        super.preventDefault();\n        const { original } = $$1(this);\n        if (\"preventDefault\" in original) {\n            original.preventDefault();\n        }\n    }\n    get timeStamp() {\n        const { original } = $$1(this);\n        if (\"timeStamp\" in original) {\n            return original.timeStamp;\n        }\n        return super.timeStamp;\n    }\n}\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap$1 = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @returns The private data of the event.\n */\nfunction $$1(event) {\n    const retv = internalDataMap$1.get(event);\n    assertType(retv != null, \"'this' is expected an Event object, but got\", event);\n    return retv;\n}\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrapperClassCache = new WeakMap();\n// Make association for wrappers.\nwrapperClassCache.set(Object.prototype, EventWrapper);\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    wrapperClassCache.set(Global.Event.prototype, EventWrapper);\n}\n/**\n * Get the wrapper class of a given prototype.\n * @param originalEvent The event object to wrap.\n */\nfunction getWrapperClassOf(originalEvent) {\n    const prototype = Object.getPrototypeOf(originalEvent);\n    if (prototype == null) {\n        return EventWrapper;\n    }\n    let wrapper = wrapperClassCache.get(prototype);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapperClassOf(prototype), prototype);\n        wrapperClassCache.set(prototype, wrapper);\n    }\n    return wrapper;\n}\n/**\n * Define new wrapper class.\n * @param BaseEventWrapper The base wrapper class.\n * @param originalPrototype The prototype of the original event.\n */\nfunction defineWrapper(BaseEventWrapper, originalPrototype) {\n    class CustomEventWrapper extends BaseEventWrapper {\n    }\n    const keys = Object.keys(originalPrototype);\n    for (let i = 0; i < keys.length; ++i) {\n        Object.defineProperty(CustomEventWrapper.prototype, keys[i], defineRedirectDescriptor(originalPrototype, keys[i]));\n    }\n    return CustomEventWrapper;\n}\n/**\n * Get the property descriptor to redirect a given property.\n */\nfunction defineRedirectDescriptor(obj, key) {\n    const d = Object.getOwnPropertyDescriptor(obj, key);\n    return {\n        get() {\n            const original = $$1(this).original;\n            const value = original[key];\n            if (typeof value === \"function\") {\n                return value.bind(original);\n            }\n            return value;\n        },\n        set(value) {\n            const original = $$1(this).original;\n            original[key] = value;\n        },\n        configurable: d.configurable,\n        enumerable: d.enumerable,\n    };\n}\n\n/**\n * Create a new listener.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n * @param signalListener The abort event listener for the abort signal.\n */\nfunction createListener(callback, capture, passive, once, signal, signalListener) {\n    return {\n        callback,\n        flags: (capture ? 1 /* Capture */ : 0) |\n            (passive ? 2 /* Passive */ : 0) |\n            (once ? 4 /* Once */ : 0),\n        signal,\n        signalListener,\n    };\n}\n/**\n * Set the `removed` flag to the given listener.\n * @param listener The listener to check.\n */\nfunction setRemoved(listener) {\n    listener.flags |= 8 /* Removed */;\n}\n/**\n * Check if the given listener has the `capture` flag or not.\n * @param listener The listener to check.\n */\nfunction isCapture(listener) {\n    return (listener.flags & 1 /* Capture */) === 1 /* Capture */;\n}\n/**\n * Check if the given listener has the `passive` flag or not.\n * @param listener The listener to check.\n */\nfunction isPassive(listener) {\n    return (listener.flags & 2 /* Passive */) === 2 /* Passive */;\n}\n/**\n * Check if the given listener has the `once` flag or not.\n * @param listener The listener to check.\n */\nfunction isOnce(listener) {\n    return (listener.flags & 4 /* Once */) === 4 /* Once */;\n}\n/**\n * Check if the given listener has the `removed` flag or not.\n * @param listener The listener to check.\n */\nfunction isRemoved(listener) {\n    return (listener.flags & 8 /* Removed */) === 8 /* Removed */;\n}\n/**\n * Call an event listener.\n * @param listener The listener to call.\n * @param target The event target object for `thisArg`.\n * @param event The event object for the first argument.\n * @param attribute `true` if this callback is an event attribute handler.\n */\nfunction invokeCallback({ callback }, target, event) {\n    try {\n        if (typeof callback === \"function\") {\n            callback.call(target, event);\n        }\n        else if (typeof callback.handleEvent === \"function\") {\n            callback.handleEvent(event);\n        }\n    }\n    catch (thrownError) {\n        reportError(thrownError);\n    }\n}\n\n/**\n * Find the index of given listener.\n * This returns `-1` if not found.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n */\nfunction findIndexOfListener({ listeners }, callback, capture) {\n    for (let i = 0; i < listeners.length; ++i) {\n        if (listeners[i].callback === callback &&\n            isCapture(listeners[i]) === capture) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Add the given listener.\n * Does copy-on-write if needed.\n * @param list The listener list.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n */\nfunction addListener(list, callback, capture, passive, once, signal) {\n    let signalListener;\n    if (signal) {\n        signalListener = removeListener.bind(null, list, callback, capture);\n        signal.addEventListener(\"abort\", signalListener);\n    }\n    const listener = createListener(callback, capture, passive, once, signal, signalListener);\n    if (list.cow) {\n        list.cow = false;\n        list.listeners = [...list.listeners, listener];\n    }\n    else {\n        list.listeners.push(listener);\n    }\n    return listener;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n * @returns `true` if it mutated the list directly.\n */\nfunction removeListener(list, callback, capture) {\n    const index = findIndexOfListener(list, callback, capture);\n    if (index !== -1) {\n        return removeListenerAt(list, index);\n    }\n    return false;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param index The index of the target listener.\n * @param disableCow Disable copy-on-write if true.\n * @returns `true` if it mutated the `listeners` array directly.\n */\nfunction removeListenerAt(list, index, disableCow = false) {\n    const listener = list.listeners[index];\n    // Set the removed flag.\n    setRemoved(listener);\n    // Dispose the abort signal listener if exists.\n    if (listener.signal) {\n        listener.signal.removeEventListener(\"abort\", listener.signalListener);\n    }\n    // Remove it from the array.\n    if (list.cow && !disableCow) {\n        list.cow = false;\n        list.listeners = list.listeners.filter((_, i) => i !== index);\n        return false;\n    }\n    list.listeners.splice(index, 1);\n    return true;\n}\n\n/**\n * Create a new `ListenerListMap` object.\n */\nfunction createListenerListMap() {\n    return Object.create(null);\n}\n/**\n * Get the listener list of the given type.\n * If the listener list has not been initialized, initialize and return it.\n * @param listenerMap The listener list map.\n * @param type The event type to get.\n */\nfunction ensureListenerList(listenerMap, type) {\n    var _a;\n    return ((_a = listenerMap[type]) !== null && _a !== void 0 ? _a : (listenerMap[type] = {\n        attrCallback: undefined,\n        attrListener: undefined,\n        cow: false,\n        listeners: [],\n    }));\n}\n\n/**\n * An implementation of the `EventTarget` interface.\n * @see https://dom.spec.whatwg.org/#eventtarget\n */\nclass EventTarget {\n    /**\n     * Initialize this instance.\n     */\n    constructor() {\n        internalDataMap$2.set(this, createListenerListMap());\n    }\n    // Implementation\n    addEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, once, passive, signal, type, } = normalizeAddOptions(type0, callback0, options0);\n        if (callback == null || (signal === null || signal === void 0 ? void 0 : signal.aborted)) {\n            return;\n        }\n        const list = ensureListenerList(listenerMap, type);\n        // Find existing listener.\n        const i = findIndexOfListener(list, callback, capture);\n        if (i !== -1) {\n            warnDuplicate(list.listeners[i], passive, once, signal);\n            return;\n        }\n        // Add the new listener.\n        addListener(list, callback, capture, passive, once, signal);\n    }\n    // Implementation\n    removeEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, type } = normalizeOptions(type0, callback0, options0);\n        const list = listenerMap[type];\n        if (callback != null && list) {\n            removeListener(list, callback, capture);\n        }\n    }\n    // Implementation\n    dispatchEvent(e) {\n        const list = $$2(this)[String(e.type)];\n        if (list == null) {\n            return true;\n        }\n        const event = e instanceof Event ? e : EventWrapper.wrap(e);\n        const eventData = $(event, \"event\");\n        if (eventData.dispatchFlag) {\n            throw createInvalidStateError(\"This event has been in dispatching.\");\n        }\n        eventData.dispatchFlag = true;\n        eventData.target = eventData.currentTarget = this;\n        if (!eventData.stopPropagationFlag) {\n            const { cow, listeners } = list;\n            // Set copy-on-write flag.\n            list.cow = true;\n            // Call listeners.\n            for (let i = 0; i < listeners.length; ++i) {\n                const listener = listeners[i];\n                // Skip if removed.\n                if (isRemoved(listener)) {\n                    continue;\n                }\n                // Remove this listener if has the `once` flag.\n                if (isOnce(listener) && removeListenerAt(list, i, !cow)) {\n                    // Because this listener was removed, the next index is the\n                    // same as the current value.\n                    i -= 1;\n                }\n                // Call this listener with the `passive` flag.\n                eventData.inPassiveListenerFlag = isPassive(listener);\n                invokeCallback(listener, this, event);\n                eventData.inPassiveListenerFlag = false;\n                // Stop if the `event.stopImmediatePropagation()` method was called.\n                if (eventData.stopImmediatePropagationFlag) {\n                    break;\n                }\n            }\n            // Restore copy-on-write flag.\n            if (!cow) {\n                list.cow = false;\n            }\n        }\n        eventData.target = null;\n        eventData.currentTarget = null;\n        eventData.stopImmediatePropagationFlag = false;\n        eventData.stopPropagationFlag = false;\n        eventData.dispatchFlag = false;\n        return !eventData.canceledFlag;\n    }\n}\n/**\n * Internal data.\n */\nconst internalDataMap$2 = new WeakMap();\n/**\n * Get private data.\n * @param target The event target object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $$2(target, name = \"this\") {\n    const retv = internalDataMap$2.get(target);\n    assertType(retv != null, \"'%s' must be an object that EventTarget constructor created, but got another one: %o\", name, target);\n    return retv;\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeAddOptions(type, callback, options) {\n    var _a;\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n            passive: Boolean(options.passive),\n            once: Boolean(options.once),\n            signal: (_a = options.signal) !== null && _a !== void 0 ? _a : undefined,\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n        passive: false,\n        once: false,\n        signal: undefined,\n    };\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeOptions(type, callback, options) {\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n    };\n}\n/**\n * Assert the type of 'callback' argument.\n * @param callback The callback to check.\n */\nfunction assertCallback(callback) {\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" &&\n            callback !== null &&\n            typeof callback.handleEvent === \"function\")) {\n        return;\n    }\n    if (callback == null || typeof callback === \"object\") {\n        InvalidEventListener.warn(callback);\n        return;\n    }\n    throw new TypeError(format(InvalidEventListener.message, [callback]));\n}\n/**\n * Print warning for duplicated.\n * @param listener The current listener that is duplicated.\n * @param passive The passive flag of the new duplicated listener.\n * @param once The once flag of the new duplicated listener.\n * @param signal The signal object of the new duplicated listener.\n */\nfunction warnDuplicate(listener, passive, once, signal) {\n    EventListenerWasDuplicated.warn(isCapture(listener) ? \"capture\" : \"bubble\", listener.callback);\n    if (isPassive(listener) !== passive) {\n        OptionWasIgnored.warn(\"passive\");\n    }\n    if (isOnce(listener) !== once) {\n        OptionWasIgnored.warn(\"once\");\n    }\n    if (listener.signal !== signal) {\n        OptionWasIgnored.warn(\"signal\");\n    }\n}\n// Set enumerable\nconst keys$1 = Object.getOwnPropertyNames(EventTarget.prototype);\nfor (let i = 0; i < keys$1.length; ++i) {\n    if (keys$1[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(EventTarget.prototype, keys$1[i], { enumerable: true });\n}\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (typeof Global !== \"undefined\" &&\n    typeof Global.EventTarget !== \"undefined\") {\n    Object.setPrototypeOf(EventTarget.prototype, Global.EventTarget.prototype);\n}\n\n/**\n * Get the current value of a given event attribute.\n * @param target The `EventTarget` object to get.\n * @param type The event type.\n */\nfunction getEventAttributeValue(target, type) {\n    var _a, _b;\n    const listMap = $$2(target, \"target\");\n    return (_b = (_a = listMap[type]) === null || _a === void 0 ? void 0 : _a.attrCallback) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * Set an event listener to a given event attribute.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction setEventAttributeValue(target, type, callback) {\n    if (callback != null && typeof callback !== \"function\") {\n        InvalidAttributeHandler.warn(callback);\n    }\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" && callback !== null)) {\n        upsertEventAttributeListener(target, type, callback);\n    }\n    else {\n        removeEventAttributeListener(target, type);\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n/**\n * Update or insert the given event attribute handler.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction upsertEventAttributeListener(target, type, callback) {\n    const list = ensureListenerList($$2(target, \"target\"), String(type));\n    list.attrCallback = callback;\n    if (list.attrListener == null) {\n        list.attrListener = addListener(list, defineEventAttributeCallback(list), false, false, false, undefined);\n    }\n}\n/**\n * Remove the given event attribute handler.\n * @param target The `EventTarget` object to remove.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction removeEventAttributeListener(target, type) {\n    const listMap = $$2(target, \"target\");\n    const list = listMap[String(type)];\n    if (list && list.attrListener) {\n        removeListener(list, list.attrListener.callback, false);\n        list.attrCallback = list.attrListener = undefined;\n    }\n}\n/**\n * Define the callback function for the given listener list object.\n * It calls `attrCallback` property if the property value is a function.\n * @param list The `ListenerList` object.\n */\nfunction defineEventAttributeCallback(list) {\n    return function (event) {\n        const callback = list.attrCallback;\n        if (typeof callback === \"function\") {\n            callback.call(this, event);\n        }\n    };\n}\n\n/**\n * Define an `EventTarget` class that has event attibutes.\n * @param types The types to define event attributes.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineCustomEventTarget(...types) {\n    class CustomEventTarget extends EventTarget {\n    }\n    for (let i = 0; i < types.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, types[i]);\n    }\n    return CustomEventTarget;\n}\n/**\n * Define an event attribute.\n * @param target The `EventTarget` object to define an event attribute.\n * @param type The event type to define.\n * @param _eventClass Unused, but to infer `Event` class type.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineEventAttribute(target, type, _eventClass) {\n    Object.defineProperty(target, `on${type}`, {\n        get() {\n            return getEventAttributeValue(this, type);\n        },\n        set(value) {\n            setEventAttributeValue(this, type, value);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n}\n\nexport default EventTarget;\nexport { Event, EventTarget, defineCustomEventTarget, defineEventAttribute, getEventAttributeValue, setErrorHandler, setEventAttributeValue, setWarningHandler };\n//# sourceMappingURL=index.mjs.map\n","(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) :\n  factory();\n}((function () { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  var Emitter = /*#__PURE__*/function () {\n    function Emitter() {\n      _classCallCheck(this, Emitter);\n\n      Object.defineProperty(this, 'listeners', {\n        value: {},\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(Emitter, [{\n      key: \"addEventListener\",\n      value: function addEventListener(type, callback, options) {\n        if (!(type in this.listeners)) {\n          this.listeners[type] = [];\n        }\n\n        this.listeners[type].push({\n          callback: callback,\n          options: options\n        });\n      }\n    }, {\n      key: \"removeEventListener\",\n      value: function removeEventListener(type, callback) {\n        if (!(type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[type];\n\n        for (var i = 0, l = stack.length; i < l; i++) {\n          if (stack[i].callback === callback) {\n            stack.splice(i, 1);\n            return;\n          }\n        }\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (!(event.type in this.listeners)) {\n          return;\n        }\n\n        var stack = this.listeners[event.type];\n        var stackToCall = stack.slice();\n\n        for (var i = 0, l = stackToCall.length; i < l; i++) {\n          var listener = stackToCall[i];\n\n          try {\n            listener.callback.call(this, event);\n          } catch (e) {\n            Promise.resolve().then(function () {\n              throw e;\n            });\n          }\n\n          if (listener.options && listener.options.once) {\n            this.removeEventListener(event.type, listener.callback);\n          }\n        }\n\n        return !event.defaultPrevented;\n      }\n    }]);\n\n    return Emitter;\n  }();\n\n  var AbortSignal = /*#__PURE__*/function (_Emitter) {\n    _inherits(AbortSignal, _Emitter);\n\n    var _super = _createSuper(AbortSignal);\n\n    function AbortSignal() {\n      var _this;\n\n      _classCallCheck(this, AbortSignal);\n\n      _this = _super.call(this); // Some versions of babel does not transpile super() correctly for IE <= 10, if the parent\n      // constructor has failed to run, then \"this.listeners\" will still be undefined and then we call\n      // the parent constructor directly instead as a workaround. For general details, see babel bug:\n      // https://github.com/babel/babel/issues/3041\n      // This hack was added as a fix for the issue described here:\n      // https://github.com/Financial-Times/polyfill-library/pull/59#issuecomment-477558042\n\n      if (!_this.listeners) {\n        Emitter.call(_assertThisInitialized(_this));\n      } // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController().signal) to be [] for compat with the native impl\n\n\n      Object.defineProperty(_assertThisInitialized(_this), 'aborted', {\n        value: false,\n        writable: true,\n        configurable: true\n      });\n      Object.defineProperty(_assertThisInitialized(_this), 'onabort', {\n        value: null,\n        writable: true,\n        configurable: true\n      });\n      return _this;\n    }\n\n    _createClass(AbortSignal, [{\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortSignal]';\n      }\n    }, {\n      key: \"dispatchEvent\",\n      value: function dispatchEvent(event) {\n        if (event.type === 'abort') {\n          this.aborted = true;\n\n          if (typeof this.onabort === 'function') {\n            this.onabort.call(this, event);\n          }\n        }\n\n        _get(_getPrototypeOf(AbortSignal.prototype), \"dispatchEvent\", this).call(this, event);\n      }\n    }]);\n\n    return AbortSignal;\n  }(Emitter);\n  var AbortController = /*#__PURE__*/function () {\n    function AbortController() {\n      _classCallCheck(this, AbortController);\n\n      // Compared to assignment, Object.defineProperty makes properties non-enumerable by default and\n      // we want Object.keys(new AbortController()) to be [] for compat with the native impl\n      Object.defineProperty(this, 'signal', {\n        value: new AbortSignal(),\n        writable: true,\n        configurable: true\n      });\n    }\n\n    _createClass(AbortController, [{\n      key: \"abort\",\n      value: function abort() {\n        var event;\n\n        try {\n          event = new Event('abort');\n        } catch (e) {\n          if (typeof document !== 'undefined') {\n            if (!document.createEvent) {\n              // For Internet Explorer 8:\n              event = document.createEventObject();\n              event.type = 'abort';\n            } else {\n              // For Internet Explorer 11:\n              event = document.createEvent('Event');\n              event.initEvent('abort', false, false);\n            }\n          } else {\n            // Fallback where document isn't available:\n            event = {\n              type: 'abort',\n              bubbles: false,\n              cancelable: false\n            };\n          }\n        }\n\n        this.signal.dispatchEvent(event);\n      }\n    }, {\n      key: \"toString\",\n      value: function toString() {\n        return '[object AbortController]';\n      }\n    }]);\n\n    return AbortController;\n  }();\n\n  if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n    // These are necessary to make sure that we get correct output for:\n    // Object.prototype.toString.call(new AbortController())\n    AbortController.prototype[Symbol.toStringTag] = 'AbortController';\n    AbortSignal.prototype[Symbol.toStringTag] = 'AbortSignal';\n  }\n\n  function polyfillNeeded(self) {\n    if (self.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      console.log('__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill');\n      return true;\n    } // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // so the below feature detection needs the !self.AbortController part.\n    // The Request.prototype check is also needed because Safari versions 11.1.2\n    // up to and including 12.1.x has a window.AbortController present but still\n    // does NOT correctly implement abortable fetch:\n    // https://bugs.webkit.org/show_bug.cgi?id=174980#c2\n\n\n    return typeof self.Request === 'function' && !self.Request.prototype.hasOwnProperty('signal') || !self.AbortController;\n  }\n\n  /**\n   * Note: the \"fetch.Request\" default value is available for fetch imported from\n   * the \"node-fetch\" package and not in browsers. This is OK since browsers\n   * will be importing umd-polyfill.js from that path \"self\" is passed the\n   * decorator so the default value will not be used (because browsers that define\n   * fetch also has Request). One quirky setup where self.fetch exists but\n   * self.Request does not is when the \"unfetch\" minimal fetch polyfill is used\n   * on top of IE11; for this case the browser will try to use the fetch.Request\n   * default value which in turn will be undefined but then then \"if (Request)\"\n   * will ensure that you get a patched fetch but still no Request (as expected).\n   * @param {fetch, Request = fetch.Request}\n   * @returns {fetch: abortableFetch, Request: AbortableRequest}\n   */\n\n  function abortableFetchDecorator(patchTargets) {\n    if ('function' === typeof patchTargets) {\n      patchTargets = {\n        fetch: patchTargets\n      };\n    }\n\n    var _patchTargets = patchTargets,\n        fetch = _patchTargets.fetch,\n        _patchTargets$Request = _patchTargets.Request,\n        NativeRequest = _patchTargets$Request === void 0 ? fetch.Request : _patchTargets$Request,\n        NativeAbortController = _patchTargets.AbortController,\n        _patchTargets$__FORCE = _patchTargets.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,\n        __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL = _patchTargets$__FORCE === void 0 ? false : _patchTargets$__FORCE;\n\n    if (!polyfillNeeded({\n      fetch: fetch,\n      Request: NativeRequest,\n      AbortController: NativeAbortController,\n      __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL: __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL\n    })) {\n      return {\n        fetch: fetch,\n        Request: Request\n      };\n    }\n\n    var Request = NativeRequest; // Note that the \"unfetch\" minimal fetch polyfill defines fetch() without\n    // defining window.Request, and this polyfill need to work on top of unfetch\n    // hence we only patch it if it's available. Also we don't patch it if signal\n    // is already available on the Request prototype because in this case support\n    // is present and the patching below can cause a crash since it assigns to\n    // request.signal which is technically a read-only property. This latter error\n    // happens when you run the main5.js node-fetch example in the repo\n    // \"abortcontroller-polyfill-examples\". The exact error is:\n    //   request.signal = init.signal;\n    //   ^\n    // TypeError: Cannot set property signal of #<Request> which has only a getter\n\n    if (Request && !Request.prototype.hasOwnProperty('signal') || __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL) {\n      Request = function Request(input, init) {\n        var signal;\n\n        if (init && init.signal) {\n          signal = init.signal; // Never pass init.signal to the native Request implementation when the polyfill has\n          // been installed because if we're running on top of a browser with a\n          // working native AbortController (i.e. the polyfill was installed due to\n          // __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL being set), then passing our\n          // fake AbortSignal to the native fetch will trigger:\n          // TypeError: Failed to construct 'Request': member signal is not of type AbortSignal.\n\n          delete init.signal;\n        }\n\n        var request = new NativeRequest(input, init);\n\n        if (signal) {\n          Object.defineProperty(request, 'signal', {\n            writable: false,\n            enumerable: false,\n            configurable: true,\n            value: signal\n          });\n        }\n\n        return request;\n      };\n\n      Request.prototype = NativeRequest.prototype;\n    }\n\n    var realFetch = fetch;\n\n    var abortableFetch = function abortableFetch(input, init) {\n      var signal = Request && Request.prototype.isPrototypeOf(input) ? input.signal : init ? init.signal : undefined;\n\n      if (signal) {\n        var abortError;\n\n        try {\n          abortError = new DOMException('Aborted', 'AbortError');\n        } catch (err) {\n          // IE 11 does not support calling the DOMException constructor, use a\n          // regular error object on it instead.\n          abortError = new Error('Aborted');\n          abortError.name = 'AbortError';\n        } // Return early if already aborted, thus avoiding making an HTTP request\n\n\n        if (signal.aborted) {\n          return Promise.reject(abortError);\n        } // Turn an event into a promise, reject it once `abort` is dispatched\n\n\n        var cancellation = new Promise(function (_, reject) {\n          signal.addEventListener('abort', function () {\n            return reject(abortError);\n          }, {\n            once: true\n          });\n        });\n\n        if (init && init.signal) {\n          // Never pass .signal to the native implementation when the polyfill has\n          // been installed because if we're running on top of a browser with a\n          // working native AbortController (i.e. the polyfill was installed due to\n          // __FORCE_INSTALL_ABORTCONTROLLER_POLYFILL being set), then passing our\n          // fake AbortSignal to the native fetch will trigger:\n          // TypeError: Failed to execute 'fetch' on 'Window': member signal is not of type AbortSignal.\n          delete init.signal;\n        } // Return the fastest promise (don't need to wait for request to finish)\n\n\n        return Promise.race([cancellation, realFetch(input, init)]);\n      }\n\n      return realFetch(input, init);\n    };\n\n    return {\n      fetch: abortableFetch,\n      Request: Request\n    };\n  }\n\n  (function (self) {\n\n    if (!polyfillNeeded(self)) {\n      return;\n    }\n\n    if (!self.fetch) {\n      console.warn('fetch() is not available, cannot install abortcontroller-polyfill');\n      return;\n    }\n\n    var _abortableFetch = abortableFetchDecorator(self),\n        fetch = _abortableFetch.fetch,\n        Request = _abortableFetch.Request;\n\n    self.fetch = fetch;\n    self.Request = Request;\n    Object.defineProperty(self, 'AbortController', {\n      writable: true,\n      enumerable: false,\n      configurable: true,\n      value: AbortController\n    });\n    Object.defineProperty(self, 'AbortSignal', {\n      writable: true,\n      enumerable: false,\n      configurable: true,\n      value: AbortSignal\n    });\n  })(typeof self !== 'undefined' ? self : global);\n\n})));\n","// https://bugs.webkit.org/show_bug.cgi?id=174980\nimport 'abortcontroller-polyfill/dist/polyfill-patch-fetch';\n\n// https://github.com/whatwg/dom/pull/467\nimport {EventTarget} from 'event-target-shim';\ntry {\n\tnew window.EventTarget();\n} catch (error) {\n\twindow.EventTarget = EventTarget;\n}\n",null,null,null,null,null,null,null,null,null,null,null,null],"names":["assertType","condition","message","args","TypeError","format","i","replace","anyToString","x","String","Object","prototype","toString","call","_classCallCheck","instance","Constructor","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","constructor","value","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","result","Super","NewTarget","this","arguments","apply","_superPropBase","object","property","hasOwnProperty","_get","receiver","get","base","desc","getOwnPropertyDescriptor","Emitter","type","callback","options","listeners","push","stack","l","splice","event","stackToCall","slice","listener","Promise","resolve","then","once","removeEventListener","defaultPrevented","AbortSignal","_Emitter","_super","_this","aborted","onabort","AbortController","Event","document","createEvent","initEvent","createEventObject","bubbles","cancelable","signal","dispatchEvent","polyfillNeeded","__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL","console","log","Request","abortableFetchDecorator","patchTargets","fetch","_patchTargets","_patchTargets$Request","NativeRequest","NativeAbortController","_patchTargets$__FORCE","input","init","request","realFetch","isPrototypeOf","undefined","abortError","DOMException","err","Error","name","reject","cancellation","_","addEventListener","race","Symbol","toStringTag","_abortableFetch","warn","global","factory","window","EventTarget","error","onDomReady","readyState","AssertionError","assert","description","UIHandler","naja","super","location","origin","handleUI","bind","initialize","bindUI","body","snippetHandler","snippet","detail","element","selectors","selector","join","bindElement","handler","elements","querySelectorAll","item","matches","bindForm","form","forms","mouseEvent","altKey","ctrlKey","shiftKey","metaKey","button","currentTarget","ignoreErrors","submitForm","catch","clickElement","async","data","method","url","CustomEvent","originalEvent","preventDefault","tagName","HTMLAnchorElement","href","HTMLInputElement","HTMLButtonElement","getAttribute","toUpperCase","pathname","search","FormData","append","coords","getBoundingClientRect","prefix","Math","max","floor","pageX","left","pageY","top","isUrlAllowed","makeRequest","urlObject","URL","allowedOrigins","includes","FormsHandler","uiHandler","processForm","initForms","netteForms","Nette","initForm","inputElement","validateForm","stopImmediatePropagation","RedirectHandler","hasAttribute","forceRedirect","payload","redirect","makeRedirect","locationAdapter","assign","force","isHardRedirect","setHardRedirect","SnippetHandler","content","innerHTML","prepend","insertAdjacentHTML","snippets","updateSnippets","static","predicate","id","fromCache","keys","forEach","getElementById","updateSnippet","operation","op","changeOperation","toLowerCase","title","HistoryHandler","handlePopState","saveUrl","pushNewState","configureMode","historyAdapter","replaceState","state","history","pushState","uiCache","defaultOptions","snippetCache","popStateHandler","buildState","prepareOptions","normalizeMode","mode","postGet","SnippetCache","storages","off","OffCacheStorage","HistoryCacheStorage","session","SessionCacheStorage","configureCache","historyHandler","buildHistoryState","restoreHistoryState","resolveStorage","option","storageType","historyUiCache","findSnippets","storage","store","scriptLoader","loadScripts","random","substr","sessionStorage","setItem","JSON","stringify","getItem","parse","ScriptLoader","Set","script","scriptId","loadedScripts","add","test","el","createElement","scripts","has","scriptEl","hasAttributes","attrs","attributes","j","attrName","setAttribute","head","appendChild","parentNode","removeChild","Naja","redirectHandler","formsHandler","registerExtension","extension","initialized","extensions","headers","Headers","transformData","abortController","credentials","set","promise","response","ok","HttpError","json","appendToQueryString","searchParams","Array","isArray","subkey","subvalue","entries","isGet","transformedData","URLSearchParams","status","statusText","checkAbortable","onInitialize","saveAbortController","clearAbortController","abortable","abort","Map","checkUniqueness","abortPreviousRequest","clearRequest","unique","abortControllers","delete"],"mappings":"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"}